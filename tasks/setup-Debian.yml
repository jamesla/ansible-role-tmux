---

- name: Ensure apt version of tmux is not installed.
  apt:
    name: tmux
    state: absent

- name: Ensure dependencies are installed.
  apt:
    name: "{{ item }}"
    state: present
  with_items:
    - libevent-dev
    - libncurses5-dev
    - build-essential
    - automake
    - pkg-config
    - git

- name: Download tmux source.
  git:
    repo: http://github.com/tmux/tmux.git
    dest: /tmp/tmux

- name: Install Tmux.
  shell: cd /tmp/tmux && sh autogen.sh && ./configure && make
  args:
    creates: /usr/bin/tmux

- shell: ls -la /tmp/tmux
  register: result

- debug:
    var: result
